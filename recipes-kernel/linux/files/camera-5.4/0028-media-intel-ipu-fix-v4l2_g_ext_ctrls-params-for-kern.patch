From fff8dc0581ef380950a537e9ea2d9329dbd75b7f Mon Sep 17 00:00:00 2001
From: Chen Meng J <meng.j.chen@intel.com>
Date: Wed, 9 Oct 2019 12:01:27 +0800
Subject: [PATCH 28/33] media: intel-ipu: fix v4l2_g_ext_ctrls params for
 kernel 5.4

fix v4l2_g_ext_ctrls params for kernel 5.4

Change-Id: I537614428206b7c59d97c2b0dae5e478ad313822
Signed-off-by: Chen Meng J <meng.j.chen@intel.com>
---
 drivers/media/pci/intel/ipu-isys-csi2.c | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

diff --git a/drivers/media/pci/intel/ipu-isys-csi2.c b/drivers/media/pci/intel/ipu-isys-csi2.c
index 3cb20188eb87..225c8ef2885e 100644
--- a/drivers/media/pci/intel/ipu-isys-csi2.c
+++ b/drivers/media/pci/intel/ipu-isys-csi2.c
@@ -111,7 +111,12 @@ int ipu_isys_csi2_get_link_freq(struct ipu_isys_csi2 *csi2, __s64 *link_freq)
 		WARN_ON(1);
 		return -ENODEV;
 	}
-#if LINUX_VERSION_CODE >= KERNEL_VERSION(4, 20, 0)
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(5, 4, 0)
+	rval = v4l2_g_ext_ctrls(ext_sd->ctrl_handler,
+				ext_sd->devnode,
+				ext_sd->v4l2_dev->mdev,
+				&cs);
+#elif LINUX_VERSION_CODE >= KERNEL_VERSION(4, 20, 0)
 	rval = v4l2_g_ext_ctrls(ext_sd->ctrl_handler,
 				ext_sd->v4l2_dev->mdev,
 				&cs);
-- 
2.20.1

