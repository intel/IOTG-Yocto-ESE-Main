From 939eb8764759da36b78f8c3091a384d73018b1d4 Mon Sep 17 00:00:00 2001
From: Sanjeev Nahulanthran <sanjeev.nahulanthran@intel.com>
Date: Thu, 6 Feb 2020 07:00:47 +0800
Subject: [PATCH] Revert "egl: fix _EGL_NATIVE_PLATFORM fallback"

This reverts commit 86d3a346f1576acb6c2f8c3be3853a6a3e226b5c.

Signed-off-by: Sanjeev Nahulanthran <sanjeev.nahulanthran@intel.com>
---
 src/egl/main/egldisplay.c | 9 +++++++++
 1 file changed, 9 insertions(+)

diff --git a/src/egl/main/egldisplay.c b/src/egl/main/egldisplay.c
index f6e85c79aa9..aea2156cccf 100644
--- a/src/egl/main/egldisplay.c
+++ b/src/egl/main/egldisplay.c
@@ -138,6 +138,15 @@ _eglNativePlatformDetectNativeDisplay(void *nativeDisplay)
       if (first_pointer == gbm_create_device)
          return _EGL_PLATFORM_DRM;
 #endif
+
+#ifdef HAVE_X11_PLATFORM
+      /* If not matched to any other platform, fallback to x11. */
+      return _EGL_PLATFORM_X11;
+#endif
+
+#ifdef HAVE_HAIKU_PLATFORM
+      return _EGL_PLATFORM_HAIKU;
+#endif
    }
 
    return _EGL_INVALID_PLATFORM;
-- 
2.17.1

