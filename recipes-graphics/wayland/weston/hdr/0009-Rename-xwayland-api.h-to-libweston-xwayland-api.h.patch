From f68b46162a15f0a3602f2937f876ec0eb40d0802 Mon Sep 17 00:00:00 2001
From: Pekka Paalanen <pekka.paalanen@collabora.com>
Date: Thu, 4 Apr 2019 15:52:47 +0300
Subject: [PATCH 09/45] Rename xwayland-api.h to libweston/xwayland-api.h

See "Rename compositor.h to libweston/libweston.h" for rationale.

Signed-off-by: Pekka Paalanen <pekka.paalanen@collabora.com>
---
 compositor/xwayland.c                          | 2 +-
 desktop-shell/shell.h                          | 2 +-
 include/libweston/meson.build                  | 2 ++
 {xwayland => include/libweston}/xwayland-api.h | 0
 xwayland/launcher.c                            | 2 +-
 xwayland/meson.build                           | 2 +-
 xwayland/xwayland.h                            | 2 +-
 7 files changed, 7 insertions(+), 5 deletions(-)
 rename {xwayland => include/libweston}/xwayland-api.h (100%)

diff --git a/compositor/xwayland.c b/compositor/xwayland.c
index 36d5cf31..50b8dcc1 100644
--- a/compositor/xwayland.c
+++ b/compositor/xwayland.c
@@ -31,7 +31,7 @@
 
 #include <libweston/libweston.h>
 #include "compositor/weston.h"
-#include "xwayland/xwayland-api.h"
+#include <libweston/xwayland-api.h>
 #include "shared/helpers.h"
 
 struct wet_xwayland {
diff --git a/desktop-shell/shell.h b/desktop-shell/shell.h
index bbf56265..c82fd28c 100644
--- a/desktop-shell/shell.h
+++ b/desktop-shell/shell.h
@@ -28,7 +28,7 @@
 #include <time.h>
 
 #include <libweston/libweston.h>
-#include "xwayland/xwayland-api.h"
+#include <libweston/xwayland-api.h>
 
 #include "weston-desktop-shell-server-protocol.h"
 
diff --git a/include/libweston/meson.build b/include/libweston/meson.build
index a3ac20c2..340cd255 100644
--- a/include/libweston/meson.build
+++ b/include/libweston/meson.build
@@ -15,3 +15,5 @@ backend_headless_h = files('backend-headless.h')
 backend_rdp_h =      files('backend-rdp.h')
 backend_wayland_h =  files('backend-wayland.h')
 backend_x11_h =      files('backend-x11.h')
+
+xwayland_api_h = files('xwayland-api.h')
diff --git a/xwayland/xwayland-api.h b/include/libweston/xwayland-api.h
similarity index 100%
rename from xwayland/xwayland-api.h
rename to include/libweston/xwayland-api.h
diff --git a/xwayland/launcher.c b/xwayland/launcher.c
index c5b99385..44083111 100644
--- a/xwayland/launcher.c
+++ b/xwayland/launcher.c
@@ -37,7 +37,7 @@
 #include <signal.h>
 
 #include "xwayland.h"
-#include "xwayland-api.h"
+#include <libweston/xwayland-api.h>
 #include "shared/helpers.h"
 #include "shared/string-helpers.h"
 #include "compositor/weston.h"
diff --git a/xwayland/meson.build b/xwayland/meson.build
index 6eb7e20c..de3eeb2e 100644
--- a/xwayland/meson.build
+++ b/xwayland/meson.build
@@ -41,4 +41,4 @@ plugin_xwayland = shared_library(
 )
 env_modmap += 'xwayland.so=@0@;'.format(plugin_xwayland.full_path())
 
-install_headers('xwayland-api.h', subdir: dir_include_libweston)
+install_headers(xwayland_api_h, subdir: dir_include_libweston_install)
diff --git a/xwayland/xwayland.h b/xwayland/xwayland.h
index 15041011..d474a511 100644
--- a/xwayland/xwayland.h
+++ b/xwayland/xwayland.h
@@ -32,7 +32,7 @@
 
 #include <libweston/libweston.h>
 #include "compositor/weston.h"
-#include "xwayland-api.h"
+#include <libweston/xwayland-api.h>
 #include "weston-debug.h"
 
 #define SEND_EVENT_MASK (0x80)
-- 
2.21.0

