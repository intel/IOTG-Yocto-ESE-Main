From b55c05b0bedb81ee236a13e861c1a8e8a2ab27c2 Mon Sep 17 00:00:00 2001
From: Your Name <you@example.com>
Date: Tue, 18 Feb 2020 19:50:49 +0700
Subject: [PATCH 2/3] Revert "vaapivideobufferpool: validate returned meta"

This reverts commit 08158991214c36169d517110065eb51efd7ffdba.
---
 gst/vaapi/gstvaapivideobufferpool.c | 7 ++-----
 1 file changed, 2 insertions(+), 5 deletions(-)

diff --git a/gst/vaapi/gstvaapivideobufferpool.c b/gst/vaapi/gstvaapivideobufferpool.c
index 013766d8..ae99c641 100644
--- a/gst/vaapi/gstvaapivideobufferpool.c
+++ b/gst/vaapi/gstvaapivideobufferpool.c
@@ -438,11 +438,8 @@ gst_vaapi_video_buffer_pool_acquire_buffer (GstBufferPool * pool,
 
   /* Update the underlying surface proxy */
   meta = gst_buffer_get_vaapi_video_meta (buffer);
-  if (!meta) {
-    *out_buffer_ptr = buffer;
-    return GST_FLOW_ERROR;
-  }
-  gst_vaapi_video_meta_set_surface_proxy (meta, priv_params->proxy);
+  if (meta)
+    gst_vaapi_video_meta_set_surface_proxy (meta, priv_params->proxy);
 
   /* Find the cached memory associated with the given surface. */
   surface = GST_VAAPI_SURFACE_PROXY_SURFACE (priv_params->proxy);
-- 
2.17.1

