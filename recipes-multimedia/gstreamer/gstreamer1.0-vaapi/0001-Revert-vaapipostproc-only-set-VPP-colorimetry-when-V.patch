From f1426d79445470426c929b618eddc8b16385b55e Mon Sep 17 00:00:00 2001
From: "Sodhi, Vunny" <vunny.sodhi@intel.com>
Date: Thu, 27 Feb 2020 13:09:17 +0700
Subject: [PATCH 1/2] Revert "vaapipostproc: only set VPP colorimetry when VPP
 is available"

This reverts commit 39f2c932ee8ef2f61e6980db15097053660a5aa4.
---
 gst/vaapi/gstvaapipostproc.c | 13 +++++--------
 1 file changed, 5 insertions(+), 8 deletions(-)

diff --git a/gst/vaapi/gstvaapipostproc.c b/gst/vaapi/gstvaapipostproc.c
index ad2d75c6..7bcd0f8e 100644
--- a/gst/vaapi/gstvaapipostproc.c
+++ b/gst/vaapi/gstvaapipostproc.c
@@ -1658,14 +1658,11 @@ gst_vaapipostproc_set_caps (GstBaseTransform * trans, GstCaps * caps,
     gst_vaapipostproc_set_passthrough (trans);
   }
 
-  if (postproc->has_vpp && !gst_vaapi_filter_set_colorimetry (postproc->filter,
-          &GST_VIDEO_INFO_COLORIMETRY (GST_VAAPI_PLUGIN_BASE_SINK_PAD_INFO
-              (postproc)),
-          &GST_VIDEO_INFO_COLORIMETRY (GST_VAAPI_PLUGIN_BASE_SRC_PAD_INFO
-              (postproc))))
-    goto done;
-
-  ret = TRUE;
+  ret = gst_vaapi_filter_set_colorimetry (postproc->filter,
+      &GST_VIDEO_INFO_COLORIMETRY (GST_VAAPI_PLUGIN_BASE_SINK_PAD_INFO
+          (postproc)),
+      &GST_VIDEO_INFO_COLORIMETRY (GST_VAAPI_PLUGIN_BASE_SRC_PAD_INFO
+          (postproc)));
 
 done:
   g_mutex_unlock (&postproc->postproc_lock);
-- 
2.17.1

