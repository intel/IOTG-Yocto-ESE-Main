From 07a9803e08a6843ba3299ef71a91374d521a61fd Mon Sep 17 00:00:00 2001
From: Haihao Xiang <haihao.xiang@intel.com>
Date: Fri, 2 Jul 2021 20:31:22 +0800
Subject: [PATCH 2/4] glimagesink: fix Y212_LE / Y212_BE in memory:DMABuf

---
 gst-libs/gst/gl/egl/gsteglimage.c | 15 +++++++++++++++
 1 file changed, 15 insertions(+)

diff --git a/gst-libs/gst/gl/egl/gsteglimage.c b/gst-libs/gst/gl/egl/gsteglimage.c
index d8a21be1c..4114eecd5 100644
--- a/gst-libs/gst/gl/egl/gsteglimage.c
+++ b/gst-libs/gst/gl/egl/gsteglimage.c
@@ -95,6 +95,10 @@
 #define DRM_FORMAT_Y210         fourcc_code('Y', '2', '1', '0')
 #endif
 
+#ifndef DRM_FORMAT_Y212
+#define DRM_FORMAT_Y212         fourcc_code('Y', '2', '1', '2')
+#endif
+
 #ifndef EGL_LINUX_DMA_BUF_EXT
 #define EGL_LINUX_DMA_BUF_EXT 0x3270
 #endif
@@ -559,6 +563,14 @@ _drm_rgba_fourcc_from_info (const GstVideoInfo * info, int plane,
       *out_format = GST_GL_RG16;
       return rg16_fourcc;
 
+    case GST_VIDEO_FORMAT_Y212_LE:
+      *out_format = GST_GL_RG16;
+      return DRM_FORMAT_GR1616;
+
+    case GST_VIDEO_FORMAT_Y212_BE:
+      *out_format = GST_GL_RG16;
+      return DRM_FORMAT_RG1616;
+
     default:
       GST_ERROR ("Unsupported format for DMABuf.");
       return -1;
@@ -729,6 +741,9 @@ _drm_direct_fourcc_from_info (const GstVideoInfo * info)
     case GST_VIDEO_FORMAT_Y210:
       return DRM_FORMAT_Y210;
 
+    case GST_VIDEO_FORMAT_Y212_LE:
+      return DRM_FORMAT_Y212;
+
     default:
       GST_INFO ("Unsupported format for direct DMABuf.");
       return -1;
-- 
2.24.3

