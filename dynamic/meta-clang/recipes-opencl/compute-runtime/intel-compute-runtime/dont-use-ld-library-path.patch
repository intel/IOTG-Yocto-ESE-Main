From 2c3b617654d75672dedb3f5dccf85883456f5952 Mon Sep 17 00:00:00 2001
From: Anuj Mittal <anuj.mittal@intel.com>
Date: Tue, 2 Jul 2019 08:36:34 +0800
Subject: [PATCH] don't use LD_LIBRARY_PATH for native offline compiler

Let us supply the correct path for it to be able to find the correct
libraries.

Upstream-Status: Inappropriate

Signed-off-by: Anuj Mittal <anuj.mittal@intel.com>
Signed-off-by: Yong, Jonathan <jonathan.yong@intel.com>
---
 runtime/built_ins/kernels/CMakeLists.txt | 2 +-
 runtime/scheduler/scheduler_binary.cmake | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/runtime/built_ins/kernels/CMakeLists.txt b/runtime/built_ins/kernels/CMakeLists.txt
index 7ac437f2..1da5b283 100644
--- a/runtime/built_ins/kernels/CMakeLists.txt
+++ b/runtime/built_ins/kernels/CMakeLists.txt
@@ -46,7 +46,7 @@ function(compile_builtin gen_type platform_type builtin)
   unset(BUILTIN_CPP)
   # set variable outside function
   set(BUILTIN_CPP built_ins/${NEO_ARCH}/${gen_type_lower}/${BASENAME}_${family_name_with_type}.cpp PARENT_SCOPE)
-  if(WIN32)
+  if(WIN32 OR CMAKE_CROSSCOMPILING)
     set(cloc_cmd_prefix ocloc)
   else()
     if(DEFINED IGDRCL__IGC_LIBRARY_PATH)
diff --git a/runtime/scheduler/scheduler_binary.cmake b/runtime/scheduler/scheduler_binary.cmake
index 0cbadbd1..827458ce 100644
--- a/runtime/scheduler/scheduler_binary.cmake
+++ b/runtime/scheduler/scheduler_binary.cmake
@@ -31,7 +31,7 @@ function(compile_kernel target gen_type platform_type kernel)
   set(OUTPUTPATH "${OUTPUTDIR}/${BASENAME}_${family_name_with_type}.bin")
 
   set(SCHEDULER_CPP "${OUTPUTDIR}/${BASENAME}_${family_name_with_type}.cpp")
-  if(WIN32)
+  if(WIN32 OR CMAKE_CROSSCOMPILING)
     set(cloc_cmd_prefix ocloc)
   else()
     if(DEFINED IGDRCL__IGC_LIBRARY_PATH)
-- 
2.20.1

